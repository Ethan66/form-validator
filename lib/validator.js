!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(n=n||self).validator=t()}(this,(function(){"use strict";var n=function(n,t){void 0===t&&(t="");var e="^("+n+"):\\/\\/[\\w\\-_]+(\\.[\\w\\-_]+)+([\\w\\-\\.,@?^=%&:/~\\+#]*[\\w\\-\\@?^=%&/~\\+#])?";return""!==t&&(e=e+".("+t+")+"),e+="$",new RegExp(e,"i")},t={required:/.+/,english:/^[A-Za-z]+$/,alphanum:/^[a-zA-Z0-9]+$/,chinese:/^[\u2E80-\uFE4F]+$/,nospace:/^\S+$/,float:/^-?(0|[1-9]\d*)(\.\d+)?([eE][+-]?\d+)?$/,positivefloat:/^(0|[1-9]\d*)(\.\d+)?([eE][+-]?\d+)?$/,integer:/^-?\d+$/,positiveint:/^\d+$/,decimal:/^-?\d+\.\d+$/,percent:/^-?\d+(\.\d+)?%$/,email:/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,http:n("https?"),phone:/^((\+86)|(86))?1[3-9]\d{9}$/,year:/^(19|20)\d{2}$/,month:/^(0?[1-9]|1[0-2])$/,day:/^((0?[1-9])|([1-2]\d)|(3[0-1]))$/,hour:/^(([01]?\d)|(2[0-3]))$/,minute:/^(([01]?\d)|([2-5]\d))$/,hmt:/^(\d|[01]\d|2[0-3]):[0-5]\d$/,time:/^(\d|([01]\d|2[0-3])):([0-5]\d):([0-5]\d)$/,date:/^((((1[6-9]|[2-9]\d)\d{2})(-|\/)(0?[13578]|1[02])\5(0?[1-9]|[12]\d|3[01]))|(((1[6-9]|[2-9]\d)\d{2})(-|\/)(0?[13456789]|1[012])\11(0?[1-9]|[12]\d|30))|(((1[6-9]|[2-9]\d)\d{2})(-|\/)0?2\17(0?[1-9]|1\d|2[0-8]))|(((1[6-9]|[2-9]\d)(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00))(-|\/)0?2\25(29)))$/,datetime:/^((((1[6-9]|[2-9]\d)\d{2})(-|\/)(0?[13578]|1[02])\5(0?[1-9]|[12]\d|3[01]))|(((1[6-9]|[2-9]\d)\d{2})(-|\/)(0?[13456789]|1[012])\11(0?[1-9]|[12]\d|30))|(((1[6-9]|[2-9]\d)\d{2})(-|\/)0?2\17(0?[1-9]|1\d|2[0-8]))|(((1[6-9]|[2-9]\d)(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00))(-|\/)0?2\25(29)))\s+(\d|([0-1]\d|2[0-3])):(\d|([0-5]?\d)):(\d|([0-5]?\d))$/,path:/^[a-zA-Z]:[\\]((?! )(?![^\\/]*\s+[\\/])[\w -]+[\\/])*(?! )(?![^.]*\s+\.)[\w -]+$/,file:/^[^<>/\\\|:''\*\?]+\.\w+$/,imgurl:n("https?","gif|png|jpg|jpeg|webp|svg")},e=function(n){return"[object Object]"===Object.prototype.toString.call(n)},r=function(n){return"number"==typeof n?String(n):n};function a(n,t){return"object"==typeof n||"object"==typeof t?JSON.stringify(n)===JSON.stringify(t):i.num(n)||i.num(t)||i.str(n)||i.str(t)||i.boolean(n)||i.boolean(t)?n==t:n===t}var i={obj:e,boolean:function(n){return"boolean"==typeof n},str:function(n){return"string"==typeof n},num:function(n){return"number"==typeof n},arr:function(n){return Array.isArray(n)},func:function(n){return"function"==typeof n},empty:function(n){return!n||(Array.isArray(n)?0===n.length:!!e(n)&&0===Object.keys(n).length)},eq:a,not:function(n,t){return!a(n,t)},gt:function(n,t){return+n>+t},gte:function(n,t){return+n>=+t},lt:function(n,t){return+n<+t},lte:function(n,t){return+n<=+t},len:function(n,t){return r(n).length===+t},min:function(n,t){return r(n).length>=+t},max:function(n,t){return r(n).length<=+t},reg:function(n,t){return t.test(n)},has:function(n,t){return function(n,t){return"number"!=typeof n&&"string"!=typeof n||"number"!=typeof t&&"string"!=typeof t?Array.isArray(n)?n.indexOf(t)>-1:!(!e(n)||"string"!=typeof t)&&Object.keys(n).indexOf(t)>-1:String(n).indexOf(String(t))>-1}(n,t)},ext:function(n,t){return(e=t,new RegExp("\\.("+e+")$","i")).test(n);var e},enum:function(n,t){for(var e=[],r=2;r<arguments.length;r++)e[r-2]=arguments[r];return[t].concat(e).indexOf(n)>-1},between:function(n,t,e){return+n>+t&&+n<+e}};
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */
function u(){for(var n=0,t=0,e=arguments.length;t<e;t++)n+=arguments[t].length;var r=Array(n),a=0;for(t=0;t<e;t++)for(var i=arguments[t],u=0,o=i.length;u<o;u++,a++)r[a]=i[u];return r}Object.keys(t).forEach((function(n){i[n]=function(e){return"number"==typeof e&&(e=String(e)),t[n].test(e)}}));var o={default:"$name未通过验证！",required:"$name不能为空！",english:"$name必须是英文字母！",alphanum:"$name必须是字母与数字混合！",chinese:"$name必须是中文！",nospace:"$name不得含任何空格字符！",float:"$name必须是浮点数！",positivefloat:"$name必须是正浮点数！",integer:"$name必须是整数！",positiveint:"$name必须是正整数！",decimal:"$name必须是小数！",percent:"$name必须是百分数！",email:"$name邮箱格式不对！",http:"$nameHttp地址格式有误！",phone:"$name手机号码格式不对！",year:"$name必须是四位年份数字！",month:"$name必须是1~12月份数字！",day:"$name必须是1~31日的数字！",hour:"$name必须是0~23小时数字！",minute:"$name必须是0~59分秒数字！",hmt:"$name时分的格式不对！",time:"$name时分秒的时间格式不对！",date:"$name日期格式不对！",datetime:"$name日期与时间格式不对！",obj:"$name必须是对象类型！",str:"$name必须是字符串类型！",num:"$name必须是数字类型！",boolean:"$name必须是布尔类型！",func:"$name必须是函数类型！",enum:"$name必须是枚举类型！",arr:"$name必须是数组类型！",not:"$name不能等于$arg1！",eq:"$name必须等于$arg1！",gt:"$name要大于$arg1！",gte:"$name要大于等于$arg1！",lt:"$name要小于$arg1！",lte:"$name要小于等于$arg1！",between:"$name要大于$arg1，小于$arg2！",len:"$name长度要等于$arg1！",min:"$name最小长度应为$arg1！",max:"$name最大长度应为$arg1！",has:"$name不存在$arg0！",empty:"$name必须是空的值！",reg:"$name没有匹配正确！",path:"$name必须是合法路径！",file:"$name必须是合法文件名！",imgurl:"$name必须是合法图片文件名！",ext:"$name必须是$arg1格式"};function s(n){return n.length>0&&n.every((function(n){return!0===n}))}function c(n){var t={_then:!1,_catchResult:[],then:function(n){return this._then&&n(!0),this},catch:function(n){return this._then||n(this._catchResult),this}};if(n.length){var e=n.filter((function(n){return!0!==n}));e.length?t._catchResult=e:t._then=!0}return t}var h=function(n,t){return[n].concat(t).map((function(n){return i.str(n)||i.num(n)?String(n):""}))},f=function(n,t,e,r){var a=t._names,u=function(n,t){return t&&t[n]?t[n]:o[n]?o[n]:o.default}(e,t._msgs);n.push(function(n,t,e,r,a){e=e||"";var u=r||[];return n=n.replace(/\$name/g,e),/\$arg\d/.test(n)&&u.length&&(n=n.replace(/\$arg\d/g,(function(){var n=u.length>0?u[0]:"";return i.str(n)?(u.shift(),n||""):n[t]?n[t]:""}))),a&&a.length>0&&/\$arg\d+/.test(n)&&a.forEach((function(t,e){return n=n.replace(new RegExp("\\$arg"+e,"g"),t)})),n}(u,e,a[0],a[1],r))};function m(n,t,e){if(!n)return!0;var r=n[0],a=n[1],i=n[2],u=n[3],o=n[4];if(r.length>0){var s={keys:r,msgs:i.length?i:void 0,path:(null==u?void 0:u.length)?u:void 0};return o&&o[1]&&o[1](s),t&&t instanceof $&&t._then&&(t._catchParams=s),!!e&&s}if(o&&o[0]){var c={keys:a};u&&u.length>0&&(c.path=u),o[0](c)}return!0}function p(n,t){if(!t||!t.length)return n;try{return t.reduce((function(n,t){return n[t]}),n)}catch(n){return}}function l(n,t,e,r){if("object"!=typeof n&&!(t instanceof $))throw new Error("无效参数");var a=[],o=[];if(t instanceof $){var h=g(n,t);t.isAsync?o.push(h):a.push(m(h,t))}else{if("object"!=typeof n||"object"!=typeof t)throw new Error("Invalid arguments");(function n(t,e){var r=[];return i.obj(t)||i.arr(t)?t instanceof $?(r.push([t,e]),r):(i.arr(t)?t.forEach((function(t,a){var i=u(e);i.push(a),t&&(r=r.concat(n(t,i)))})):Object.keys(t).forEach((function(a){var i=u(e);i.push(a),t[a]&&(r=r.concat(n(t[a],i)))})),r):r})(t,[]).forEach((function(t){var i=t[0],u=t[1],s=g(p(n,u),i,e?e.concat(u):u);i.isAsync?o.push(s):a.push(m(s,void 0,r))}))}return o.length>0?new Promise((function(n,t){Promise.all(o).then((function(t){t.forEach((function(n){a.push(m(n))})),n(s(a))})).catch((function(n){t(n)}))})):r?c.call(this,a):s(a)}function g(n,t,e){if("string"==typeof n&&(n=n.trim()),"boolean"==typeof n||!i.empty(n)||-1!==t._types.indexOf("required")){for(var r=i,a=[],o=[],s=[],c=[],m=[o,s,c,e,t._handler],p=0,l=t._types.length;p<l;p++){var g=t._types[p];"string"==typeof g?!1===r[g](n)?(o.push(g),f(c,t,g,h(n))):s.push(g):Array.isArray(g)&&(!1===r[g[0]].apply(r,u([n],g[1]))?(o.push(g[0]),f(c,t,g[0],h(n,g[1]))):s.push(g[0]))}for(p=0,l=t._customs.length;p<l;p++){var d=t._customs[p],$=d[0],y=d[1],v=d[2]||[];if("sync"===$){var _="sync"+(p||"");!1===y.apply(void 0,u([n],v))?(o.push(_),c.push(_+"校验失败")):s.push(_)}else"async"===$&&a.push(y.apply(void 0,u([n],v)))}return t.isAsync?new Promise((function(n,t){Promise.all(a).then((function(t){t.forEach((function(n,t){var e="async"+(t||"");!1===n?(o.push(e),c.push(e+"校验失败")):s.push(e)})),n(m)})).catch((function(n){t(n)}))})):m}}var d=Object.create(null),$=function(){function n(){this._val="",this._then=!1,this._catchParams={keys:[]},this._types=[],this._handler=[],this._customs=[],this._names=[],this.isAsync=!1}return Object.defineProperty(n.prototype,"any",{get:function(){return this},enumerable:!1,configurable:!0}),n.prototype.define=function(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return i.func(n)&&this._customs.push(["sync",n,t]),this},n.prototype.async=function(n){return i.func(n)&&this._customs.push(["async",n]),this.isAsync=!0,this},n.prototype.then=function(n){return i.func(n)&&(this._handler[0]=n),this._then=!0,l(this._val,this),this},n.prototype.catch=function(n){this._catchParams.keys.length?n(this._catchParams):this._then||(i.func(n)&&(this._handler[1]=n),l(this._val,this))},n.prototype.alias=function(n,t){var e=this._names[0],r=this._names[1];return e?e&&!r?this._names[1]=[n]:e&&r&&r.push(n):this._names[0]=n,t&&(i.str(t),this._names[1]=r?r.concat(t):[t]),this},n.prototype.msg=function(n,t){return this._msgs||(this._msgs={}),i.str(n)&&t?this._msgs[n]=t:i.obj(n)&&Object.assign(this._msgs,n),this},n}();return Object.keys(i).forEach((function(n){1===i[n].length?d[n]={get:function(){return this._types.push(n),this}}:d[n]={value:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._types.push([n,t]),this}}})),Object.defineProperties($.prototype,d),{get str(){return(new $).str},get num(){return(new $).num},get obj(){return(new $).obj},get arr(){return(new $).arr},get boolean(){return(new $).boolean},get any(){return new $},judge:function(n,t){return l(n,t)},validate:function(n,t){return l.call(this,n,t,[],!0)},get:function(n,t){return p(n,i.str(t)?t.split("."):t)},valid:function(n,t){var e=n;t&&(e=p(n,i.str(t)?t.split("."):t));var r=new $;return r._val=e,r}}}));
//# sourceMappingURL=validator.js.map
